> [๐ ะะปะฐะฒะฝะฐั](./README.md)
> [๐ ะััะฝะฐะป ะธะทะผะตะฝะตะฝะธะน](../../CHANGELOG.md)
 
# ะกะพะทะดะฐะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปััะบะธั middlewares

Synapse ะฟัะตะดะพััะฐะฒะปัะตั ะดะฒะต ัะธััะตะผั ัะฐััะธัะตะฝะธั ััะฝะบัะธะพะฝะฐะปัะฝะพััะธ: middleware ะธ ะฟะปะฐะณะธะฝั. ะะฝะธ ะฒัะฟะพะปะฝััั ัะฐะทะฝัะต ัะพะปะธ ะธ ะธะผะตัั ัะฐะทะฝัั ะพะฑะปะฐััั ะฟัะธะผะตะฝะตะฝะธั.

Middleware ะฒ Synapse ัะฐะฑะพัะฐัั ะฟะพ ะฟัะธะฝัะธะฟั "ัะตะฟะพัะบะธ ะพะฑัะฐะฑะพััะธะบะพะฒ" ะธ ะฟะพะทะฒะพะปััั ะฟะตัะตัะฒะฐััะฒะฐัั ะปัะฑัะต ะพะฟะตัะฐัะธะธ ััะฐะฝะธะปะธัะฐ. ะะฐะถะดะพะต middleware ะผะพะถะตั ะผะพะดะธัะธัะธัะพะฒะฐัั ะดะตะนััะฒะธั ะดะพ ะธ ะฟะพัะปะต ะธั ะพะฑัะฐะฑะพัะบะธ ะฑะฐะทะพะฒัะผ ััะฐะฝะธะปะธัะตะผ.


### ะะพััะดะพะบ ะฒัะฟะพะปะฝะตะฝะธั middleware

Middleware ะฒัะฟะพะปะฝััััั ะฒ ะฟะพััะดะบะต ะธั ะพะฑััะฒะปะตะฝะธั ะฒ ะผะฐััะธะฒะต:
1. ะะตะนััะฒะธะต ะฟัะพัะพะดะธั ัะตัะตะท ะฒัะต middleware ัะฒะตััั ะฒะฝะธะท
2. ะะฐัะตะผ ะฒัะฟะพะปะฝัะตััั ะฑะฐะทะพะฒะฐั ะพะฟะตัะฐัะธั ััะฐะฝะธะปะธัะฐ
3. ะะตะทัะปััะฐั ะฟัะพัะพะดะธั ัะตัะตะท middleware ัะฝะธะทั ะฒะฒะตัั

```
Action โ BroadcastMiddleware โ ShallowCompare โ Batching โ Base Operation
Result โ BroadcastMiddleware โ ShallowCompare โ Batching โ Base Operation
```

> โ๏ธ ะะฐะถะฝะพ: ะะพััะดะพะบ middleware ะธะผะตะตั ะทะฝะฐัะตะฝะธะต!
> - BroadcastMiddleware ะดะพะปะถะตะฝ ะฑััั ะฟะตัะฒัะผ ะดะปั ัะธะฝััะพะฝะธะทะฐัะธะธ ะผะตะถะดั ะฒะบะปะฐะดะบะฐะผะธ
> - ShallowCompare ะพะฟัะธะผะธะทะธััะตั ะฟะพะฒัะพัะฝัะต ะฒัะทะพะฒั
> - Batching ะณััะฟะฟะธััะตั ะพะฟะตัะฐัะธะธ ะดะปั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ

#### ะกะพะทะดะฐะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปััะบะพะณะพ middleware

```typescript
import { Middleware } from 'synapse-storage/core';

const loggingMiddleware = (): Middleware => ({
  // ะฃะฝะธะบะฐะปัะฝะพะต ะธะผั middleware
  name: 'logging',
  
  // ะะฝะธัะธะฐะปะธะทะฐัะธั ะฟัะธ ะดะพะฑะฐะฒะปะตะฝะธะธ middleware ะบ ััะฐะฝะธะปะธัั
  setup: (api) => {
    console.log('Logging middleware initialized');
  },
  
  // ะัะฝะพะฒะฝะฐั ะปะพะณะธะบะฐ ะฟะตัะตัะฒะฐัะฐ ะธ ะพะฑัะฐะฑะพัะบะธ ะดะตะนััะฒะธะน
  reducer: (api) => (next) => async (action) => {
    console.log('Before action:', action);
    
    try {
      // ะัะทะพะฒ ัะปะตะดัััะตะณะพ middleware ะฒ ัะตะฟะพัะบะต
      const result = await next(action);
      
      console.log('After action:', {
        action,
        result,
      });
      
      return result;
    } catch (error) {
      console.error('Action error:', error);
      throw error;
    }
  },
  
  // ะัะธััะบะฐ ัะตััััะพะฒ ะฟัะธ ัะฝะธััะพะถะตะฝะธะธ ััะฐะฝะธะปะธัะฐ
  cleanup: () => {
    console.log('Logging middleware cleanup');
  }
});
```

ะะพะทะถะต ะดะพะฑะฐะฒะปั ะฑะพะปะตะต ะดะตัะฐะปะธะทะธัะพะฒะฐะฝะฝัะต ะฟัะธะผะตัั

___


## ๐ ะะฐะฒะธะณะฐัะธั

- [๐ ะะปะฐะฒะฝะฐั](./README.md)
- [๐ ะัะต ัะฐะทะดะตะปั ะดะพะบัะผะตะฝัะฐัะธะธ](./README.md#-ะดะพะบัะผะตะฝัะฐัะธั)

### ะกะฒัะทะฐะฝะฝัะต ัะฐะทะดะตะปั:
- [โ๏ธ Middlewares](./middlewares.md)
- [๐ ะกะพะทะดะฐะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปััะบะธั ะฟะปะฐะณะธะฝะพะฒ](./custom-plugins.md)
- [๐ ะะฐะทะพะฒะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต](./basic-usage.md)
